(()=>{var e={};e.id=931,e.ids=[931],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},6490:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=s(7096),a=s(6132),l=s(7284),n=s.n(l),i=s(2564),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3982)),"D:\\cursor vip for free\\test01\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,5345)),"D:\\cursor vip for free\\test01\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\cursor vip for free\\test01\\app\\page.tsx"],x="/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4620:(e,t,s)=>{Promise.resolve().then(s.bind(s,3897))},3897:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Home});var r=s(784),a=s(9885),l=s(6198);function SearchForm({onSearch:e,setIsLoading:t}){let[s,n]=(0,a.useState)(""),handleSubmit=async r=>{if(r.preventDefault(),s.trim()){t(!0);try{let t=await fetch("/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:s.trim()})});if(!t.ok)throw Error("搜索失败");let r=await t.json();e(r.novels)}catch(e){console.error("搜索错误:",e),alert("搜索失败，请稍后重试")}finally{t(!1)}}};return(0,r.jsxs)("div",{className:"card max-w-2xl mx-auto",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center",children:"搜索小说"}),(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",value:s,onChange:e=>n(e.target.value),placeholder:"输入小说名称...",className:"input-field pl-10",required:!0})]}),r.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:!s.trim(),children:"开始搜索"})]}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDCA1 使用提示"}),(0,r.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[r.jsx("li",{children:"• 输入小说名称，AI会自动搜索相关信息"}),r.jsx("li",{children:"• 系统会自动分析小说简介并分类"}),r.jsx("li",{children:"• 确认信息后可以保存到收藏夹"}),r.jsx("li",{children:"• 支持导出到飞书文档"})]})]})]})}var n=s(4918),i=s(3997);function NovelResults({novels:e,onSave:t,isLoading:s}){let[l,o]=(0,a.useState)(new Set),handleSave=e=>{let s=`${e.title}-${e.author}`;o(e=>{let t=new Set(e);return t.add(s),t}),t(e)},isSaved=e=>{let t=`${e.title}-${e.author}`;return l.has(t)},getCategoryColor=e=>{let t={暗恋文:"bg-pink-100 text-pink-800",救赎文:"bg-purple-100 text-purple-800",豪门文:"bg-yellow-100 text-yellow-800",先婚后爱文:"bg-red-100 text-red-800",校园文:"bg-green-100 text-green-800",都市文:"bg-blue-100 text-blue-800",古言文:"bg-orange-100 text-orange-800",现言文:"bg-indigo-100 text-indigo-800",其他:"bg-gray-100 text-gray-800"};return t[e]||t["其他"]};return s?r.jsx("div",{className:"card max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"正在搜索中..."})]})}):0===e.length?null:(0,r.jsxs)("div",{className:"card max-w-4xl mx-auto",children:[(0,r.jsxs)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:["搜索结果 (",e.length,")"]}),r.jsx("div",{className:"space-y-6",children:e.map((e,t)=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.title}),(0,r.jsxs)("p",{className:"text-gray-600 mb-2",children:[r.jsx("span",{className:"font-medium",children:"作者："}),e.author]}),r.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${getCategoryColor(e.category)}`,children:e.category})]}),r.jsx("button",{onClick:()=>handleSave(e),disabled:isSaved(e),className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${isSaved(e)?"bg-green-100 text-green-700 cursor-not-allowed":"bg-primary-50 text-primary-700 hover:bg-primary-100"}`,children:isSaved(e)?(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.Z,{className:"h-5 w-5"}),r.jsx("span",{children:"已保存"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(i.Z,{className:"h-5 w-5"}),r.jsx("span",{children:"保存"})]})})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"简介："}),r.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.description})]}),(0,r.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:["搜索时间：",e.searchDate]})]},t))})]})}var o=s(7939),d=s(4673),c=s(4635);function SavedNovels({novels:e,onRemove:t}){let[s,l]=(0,a.useState)("全部"),[n,i]=(0,a.useState)(!1),x=["全部",...Array.from(new Set(e.map(e=>e.category)))],m="全部"===s?e:e.filter(e=>e.category===s),getCategoryColor=e=>{let t={暗恋文:"bg-pink-100 text-pink-800",救赎文:"bg-purple-100 text-purple-800",豪门文:"bg-yellow-100 text-yellow-800",先婚后爱文:"bg-red-100 text-red-800",校园文:"bg-green-100 text-green-800",都市文:"bg-blue-100 text-blue-800",古言文:"bg-orange-100 text-orange-800",现言文:"bg-indigo-100 text-indigo-800",其他:"bg-gray-100 text-gray-800"};return t[e]||t["其他"]},handleExportToFeishu=async()=>{if(0===e.length){alert("没有小说可以导出");return}i(!0);try{let t=await fetch("/api/export-feishu",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({novels:e})});if(!t.ok)throw Error("导出失败");let s=await t.json();alert(`成功导出到飞书文档！文档链接：${s.documentUrl}`)}catch(e){console.error("导出错误:",e),alert("导出失败，请稍后重试")}finally{i(!1)}};return 0===e.length?(0,r.jsxs)("div",{className:"card max-w-4xl mx-auto text-center py-12",children:[r.jsx(o.Z,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"还没有收藏的小说"}),r.jsx("p",{className:"text-gray-600",children:"搜索并保存你喜欢的小说吧！"})]}):(0,r.jsxs)("div",{className:"card max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-semibold text-gray-900",children:["我的收藏 (",e.length,")"]}),(0,r.jsxs)("button",{onClick:handleExportToFeishu,disabled:n,className:"btn-primary flex items-center space-x-2",children:[r.jsx(d.Z,{className:"h-5 w-5"}),r.jsx("span",{children:n?"导出中...":"导出到飞书"})]})]}),r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(e=>r.jsx("button",{onClick:()=>l(e),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${s===e?"bg-primary-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e},e))})}),r.jsx("div",{className:"space-y-6",children:m.map((e,s)=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.title}),(0,r.jsxs)("p",{className:"text-gray-600 mb-2",children:[r.jsx("span",{className:"font-medium",children:"作者："}),e.author]}),r.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${getCategoryColor(e.category)}`,children:e.category})]}),(0,r.jsxs)("button",{onClick:()=>t(e),className:"flex items-center space-x-2 px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[r.jsx(c.Z,{className:"h-5 w-5"}),r.jsx("span",{children:"删除"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"简介："}),r.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.description})]}),(0,r.jsxs)("div",{className:"mt-4 text-sm text-gray-500 flex justify-between",children:[(0,r.jsxs)("span",{children:["搜索时间：",e.searchDate]}),e.savedDate&&(0,r.jsxs)("span",{children:["保存时间：",e.savedDate]})]})]},s))}),0===m.length&&r.jsx("div",{className:"text-center py-8 text-gray-500",children:"该分类下没有收藏的小说"})]})}function Home(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)("search");return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"\uD83D\uDCDA 小说助手"}),r.jsx("p",{className:"text-lg text-gray-600",children:"AI智能搜索、分类和保存你喜爱的小说"})]}),r.jsx("div",{className:"flex justify-center mb-8",children:(0,r.jsxs)("div",{className:"flex bg-white rounded-lg p-1 shadow-md",children:[r.jsx("button",{onClick:()=>d("search"),className:`px-6 py-2 rounded-md font-medium transition-colors ${"search"===o?"bg-primary-500 text-white":"text-gray-600 hover:text-gray-900"}`,children:"搜索小说"}),(0,r.jsxs)("button",{onClick:()=>d("saved"),className:`px-6 py-2 rounded-md font-medium transition-colors ${"saved"===o?"bg-primary-500 text-white":"text-gray-600 hover:text-gray-900"}`,children:["我的收藏 (",s.length,")"]})]})}),"search"===o?(0,r.jsxs)("div",{className:"space-y-8",children:[r.jsx(SearchForm,{onSearch:t,setIsLoading:i}),r.jsx(NovelResults,{novels:e,onSave:e=>{l(t=>{let s=t.find(t=>t.title===e.title&&t.author===e.author);return s?t:[...t,e]})},isLoading:n})]}):r.jsx(SavedNovels,{novels:s,onRemove:e=>{l(t=>t.filter(t=>!(t.title===e.title&&t.author===e.author)))}})]})}},3982:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>o});var r=s(5153);let a=(0,r.createProxy)(String.raw`D:\cursor vip for free\test01\app\page.tsx`),{__esModule:l,$$typeof:n}=a,i=a.default,o=i}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[862,963,651],()=>__webpack_exec__(6490));module.exports=s})();